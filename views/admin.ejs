<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
  <link rel="stylesheet" href="/styles.css">
</head>

<body class="index-page">

<nav class="container-fluid index-nav">
  <ul>
    <li><a href="/">⬅️ Αρχική</a></li>
  </ul>
</nav>

<main class="pick-layout">
  <h2>🛡 Διαχείριση Secret Santa</h2>

  <p class="subtitle">
    Διαθέσιμες κάρτες —
    <strong>ME:</strong> <%= remainingMe %> |
    <strong>TARGET:</strong> <%= remainingTarget %>
  </p>

  <% if (Object.keys(assignments).length === 0) { %>
    <p>Δεν υπάρχουν συμμετοχές.</p>
  <% } else { %>

  <table>
    <thead>
      <tr>
        <th>Όνομα</th>
        <th>Ρόλος</th>
        <th>Δώρο για</th>
        <th>Κωδικός</th>
        <th class="actions">Ενέργεια</th>
      </tr>
    </thead>
    <tbody>
      <% Object.entries(assignments).forEach(([code, a]) => { %>
        <tr>
          <td><%= a.name %></td>
          <td><%= a.me.name %></td>
          <td><%= a.target.name %></td>
          <td><code><%= code %></code></td>
          <td class="actions">
            <form
              method="POST"
              action="/admin/delete/<%= code %>?token=<%= token %>"
              onsubmit="return confirm('Σίγουρα θέλεις να διαγράψεις αυτή τη συμμετοχή;');"
            >
              <button style="width: 150px; font-size:large; font-weight: 600;" class="secondary">🗑 Διαγραφή</button>
              
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>

  <% } %>
</main>

</body>
</html>
